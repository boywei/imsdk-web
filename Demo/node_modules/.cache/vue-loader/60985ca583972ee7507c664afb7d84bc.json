{"remainingRequest":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/group-live/components/live-player.vue?vue&type=style&index=1&id=2371ce84&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/group-live/components/live-player.vue","mtime":1648707124000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cursor {\n  cursor: pointer;\n}\n.active {\n  color: #2d8cf0\n}\n.setting-icon {\n  display flex\n  justify-content center\n  align-items center\n  height 40px\n  margin 0 10px\n}\n.player {\n  position relative\n  width 99.9%\n  height 100%\n  display flex\n  flex-flow column\n  .video-container {\n    position relative\n    display flex\n    flex-direction column\n    justify-content center\n    align-items center\n    flex 1\n    background rgba(0, 0, 0, 0.3)\n    .stop-camera {\n      position absolute\n      top 0\n      right 0\n      bottom 0\n      left 0\n      background-color #ffffff\n      display flex\n      flex-direction column\n      justify-content center\n      align-items center\n    }\n  }\n  .header-bar {\n    position: relative;\n    width 100%\n    height 70px\n    background-color #363e47\n    padding 10px 10px 10px 20px\n  }\n  .setting-bar {\n    position: relative;\n    bottom 0\n    width 100%\n    height 55px\n    background-color #363e47\n    .player-time{\n      position: absolute;\n      bottom 0\n      left 15px\n      width 100%\n      line-height 60px\n      font-size: 14px;\n      color: #D2DAE6;\n      letter-spacing: 0;\n    }\n    .player-start {\n      position: absolute;\n      right 0\n      bottom 0\n      width 210px\n      height 55px\n      background #5cadff\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .player-mic{\n      position: absolute;\n      right 260px\n      bottom 0\n      /*width 210px*/\n      height 55px\n      display: flex;\n      justify-content: center;\n      align-items: center\n      padding 0 10px\n    }\n    .play-text{\n      font-size 16px\n      color #ffffff\n      margin-left 5px\n    }\n    .player-icon{\n      width 14px\n      height 14px\n    }\n    .mic-text{\n      font-size 14px\n      color #8A9099\n      margin-left 5px\n    }\n  }\n  .volume-box {\n    position absolute\n    right 220px\n    bottom 8px\n    .progress-box {\n      padding 4px 0\n      position absolute\n      bottom 35px\n      right 32px\n    }\n  }\n  /deep/ .vcp-player video {\n    position absolute\n    top 0\n    left 0\n    width 100% !important\n    height 100% !important\n    object-fit cover\n  }\n\n  /deep/ .vcp-player {\n    width 100% !important\n    height 100% !important\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color:rgba(0,0,0,0)\n  }\n\n  /deep/ .vcp-bigplay {\n    display none\n  }\n\n  /deep/ .vcp-error-tips {\n    color #FFFFFF\n    margin-top: -8.25em\n  }\n}\n",{"version":3,"sources":["live-player.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"live-player.vue","sourceRoot":"src/components/group-live/components","sourcesContent":["<template>\n  <div class=\"player\">\n    <div class=\"header-bar\">\n      <live-header  fr=\"player\" />\n    </div>\n    <div id=\"player-container\" class=\"video-container\">\n      <div style=\"position: absolute\">\n        <img src=\"../../../assets/image/no-video.png\">\n        <p style=\"font-size: 24px;color: #8A9099;text-align: center;margin-top: 30px\">暂无画面</p>\n      </div>\n    </div>\n    <div class=\"setting-bar\">\n      <!-- <live-share /> -->\n      <div>\n        <div class=\"player-start cursor\" v-if=\"!isPlaying\" @click=\"resumeVideo\">\n          <img class=\"player-icon\" src=\"../../../assets/image/web-pusher-start.png\">\n          <span class=\"play-text\">观看直播</span>\n        </div>\n        <div class=\"player-start cursor\" v-else @click=\"pauseVideo\">\n          <img class=\"player-icon\" src=\"../../../assets/image/pause-icon.png\">\n          <span class=\"play-text\">暂停观看</span>\n        </div>\n      </div>\n      <div class=\"volume-box\" ref=\"volumeBox\">\n        <p class=\"setting-icon cursor \" @click=\"setPlayoutVolume\">\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <mask id=\"path-1-inside-1\" fill=\"white\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.18171 12H0V4H4.19181L8 0.831913L9 0V1.3008V14.7003V16L8 15.1698L4.18171 12ZM5 4.62845L8 2.13271V13.8701L5 11.3796V4.62845Z\"/>\n            </mask>\n            <path d=\"M0 12V14H-2V12H0ZM4.18171 12V10H4.9037L5.45921 10.4612L4.18171 12ZM0 4H-2V2H0V4ZM4.19181 4L5.47089 5.53752L4.91496 6H4.19181V4ZM8 0.831913L6.72092 -0.705603V-0.705603L8 0.831913ZM9 0L7.72092 -1.53752L11 -4.26543V0H9ZM9 16H11V20.2597L7.72251 17.5388L9 16ZM8 15.1698L9.27749 13.631H9.27749L8 15.1698ZM5 4.62845H3V3.69068L3.72092 3.09094L5 4.62845ZM8 2.13271L6.72092 0.595197L10 -2.13271V2.13271H8ZM8 13.8701H10V18.1299L6.72251 15.409L8 13.8701ZM5 11.3796L3.72251 12.9185L3 12.3187V11.3796H5ZM0 10H4.18171V14H0V10ZM2 4V12H-2V4H2ZM4.19181 6H0V2H4.19181V6ZM2.91273 2.46248L6.72092 -0.705603L9.27908 2.36943L5.47089 5.53752L2.91273 2.46248ZM6.72092 -0.705603L7.72092 -1.53752L10.2791 1.53752L9.27908 2.36943L6.72092 -0.705603ZM11 0V1.3008H7V0H11ZM11 1.3008V14.7003H7V1.3008H11ZM11 14.7003V16H7V14.7003H11ZM7.72251 17.5388L6.72251 16.7087L9.27749 13.631L10.2775 14.4612L7.72251 17.5388ZM6.72251 16.7087L2.90422 13.5388L5.45921 10.4612L9.27749 13.631L6.72251 16.7087ZM3.72092 3.09094L6.72092 0.595197L9.27908 3.67023L6.27908 6.16597L3.72092 3.09094ZM10 2.13271V13.8701H6V2.13271H10ZM6.72251 15.409L3.72251 12.9185L6.27749 9.8408L9.27749 12.3313L6.72251 15.409ZM3 11.3796V4.62845H7V11.3796H3Z\" fill=\"#8A9099\" mask=\"url(#path-1-inside-1)\"/>\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.6088 13.9991C13.9991 13.0388 15.6868 10.6992 15.6868 7.9654C15.6868 5.24314 14.0133 2.91174 11.639 1.94385L10.9332 3.81684C12.5511 4.49874 13.6868 6.09944 13.6868 7.9654C13.6868 9.84413 12.5355 11.454 10.8999 12.1278L11.6088 13.9991Z\" fill=\"#8A9099\"/>\n          </svg>\n          <span class=\"mic-text\">声音</span>\n        </p>\n        <span class=\"progress-box\" ref=\"progressBox\" v-show=\"showSetVolume\">\n          <el-slider vertical height=\"200px\" @change=\"setPlayoutVolume\" v-model=\"volumeValue\"></el-slider>\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex'\nimport { Slider } from 'element-ui'\nimport liveHeader from './live-header'\n// import liveShare from './live-share'\nimport poster from '../../../assets/image/poster.png'\n\nexport default {\n  name: 'livePlayer',\n  data() {\n    return {\n      player: null,\n      isPlaying: true, // 是否正在播放\n      volumeValue: 70,\n      showSetVolume: false,\n      isMute: false,\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user,\n      roomID: state => state.groupLive.groupLiveInfo.roomID,\n      anchorID: state => state.groupLive.groupLiveInfo.anchorID,\n    }),\n  },\n  mounted() {\n    this.init()\n    const volumeBox = this.$refs.volumeBox\n    const progressBox = this.$refs.progressBox\n    progressBox.addEventListener('mouseover', () => {\n      this.showSetVolume = true\n    })\n    progressBox.addEventListener('mouseout', () => {\n      this.showSetVolume = false\n    })\n    volumeBox.addEventListener('mouseover', () => {\n      this.showSetVolume = true\n    })\n    volumeBox.addEventListener('mouseout', () => {\n      this.showSetVolume = false\n    })\n  },\n  beforeDestroy() {\n    this.stopPlay()\n  },\n  components: {\n    liveHeader,\n    // liveShare,\n    elSlider: Slider\n  },\n  methods: {\n    // 初始化\n    init() {\n      this.player = this.TWebLive.createPlayer()\n      this.player.setCustomConfig({\n        autoplay: true,\n        poster: { style:'cover', src: poster },\n        pausePosterEnabled: false,\n        wording: {\n          1:'您观看的直播已结束哦~ ',\n          2:'您观看的直播已结束哦~ ',\n          4:'您观看的直播已结束哦~ ',\n          13:'您观看的直播已结束',\n          2032: '请求视频失败，请检查网络',\n          2048: '请求m3u8文件失败，可能是网络错误或者跨域问题'\n        }\n      })\n      // 播放时\n      this.player.on(this.TWebLive.EVENT.PLAYER_PLAYING, this.onPlayerPlaying)\n      // 暂停\n      this.player.on(this.TWebLive.EVENT.PLAYER_PAUSE, this.onPlayerPause)\n      // 浏览器不允许自动播放\n      this.player.on(this.TWebLive.EVENT.PLAYER_AUTOPLAY_NOT_ALLOWED, this.onPlayerAutoPlayNotAllowed)\n      this.player.on(this.TWebLive.EVENT.PLAYER_ERROR, this.onPlayerError)\n      this.setRenderView()\n      this.$bus.$emit('join-group-live-avchatroom')\n    },\n    // eslint-disable-next-line no-unused-vars\n    onPlayerPlaying(event) {},\n    // eslint-disable-next-line no-unused-vars\n    onPlayerPause(event) {},\n    // eslint-disable-next-line no-unused-vars\n    onPlayerAutoPlayNotAllowed(event) {\n      this.$store.commit('showMessage', {\n        message: '不能自动播放',\n        type: 'info'\n      })\n    },\n    // eslint-disable-next-line no-unused-vars\n    onPlayerError(event) {},\n    // 设置渲染界面\n    setRenderView() {\n      this.player.setRenderView({ elementID: 'player-container' })\n      this.startPlay()\n    },\n    //开始播放\n    startPlay() {\n      const streamID = `${this.user.sdkAppID}_${this.roomID}_${this.anchorID}_main`\n      const flv = `https://tuikit.qcloud.com/live/${streamID}.flv`\n      const hls = `https://tuikit.qcloud.com/live/${streamID}.m3u8` \n      const url = `https://flv=${encodeURIComponent(flv)}&hls=${encodeURIComponent(hls)}`\n      this.player.startPlay(url).then(() => {\n        this.isPlaying = true\n      }).catch(() => {})\n    },\n    resumeAudio() {\n      this.player.resumeAudio().then(() => {\n        this.isMute = false\n      }).catch(() => {})\n    },\n    pauseAudio() {\n      this.player.pauseAudio().then(() => {\n        this.isMute = true\n      }).catch(() => {})\n    },\n    //暂停播放\n    pauseVideo() {\n      this.player.pauseVideo().then(() => {\n        this.isPlaying = false\n      }).catch(() => {})\n    },\n    // 恢复播放\n    resumeVideo() {\n      this.player.resumeVideo().then(() => {\n        this.isPlaying = true\n      }).catch(() => {})\n    },\n    setPlayoutVolume() {\n      this.player.setPlayoutVolume(this.volumeValue)\n    },\n    // 停止播放\n    stopPlay() {\n      this.player.stopPlay()\n      this.isPlaying = false\n    },\n  }\n}\n</script>\n<style  lang=\"stylus\">\n.vcp-controls-panel {\n  display none\n}\n.el-slider__bar {\n  background #5cadff !important\n}\n.el-slider__button {\n  border hidden\n}\n</style>\n<style lang=\"stylus\" scoped>\n  .cursor {\n    cursor: pointer;\n  }\n  .active {\n    color: #2d8cf0\n  }\n  .setting-icon {\n    display flex\n    justify-content center\n    align-items center\n    height 40px\n    margin 0 10px\n  }\n  .player {\n    position relative\n    width 99.9%\n    height 100%\n    display flex\n    flex-flow column\n    .video-container {\n      position relative\n      display flex\n      flex-direction column\n      justify-content center\n      align-items center\n      flex 1\n      background rgba(0, 0, 0, 0.3)\n      .stop-camera {\n        position absolute\n        top 0\n        right 0\n        bottom 0\n        left 0\n        background-color #ffffff\n        display flex\n        flex-direction column\n        justify-content center\n        align-items center\n      }\n    }\n    .header-bar {\n      position: relative;\n      width 100%\n      height 70px\n      background-color #363e47\n      padding 10px 10px 10px 20px\n    }\n    .setting-bar {\n      position: relative;\n      bottom 0\n      width 100%\n      height 55px\n      background-color #363e47\n      .player-time{\n        position: absolute;\n        bottom 0\n        left 15px\n        width 100%\n        line-height 60px\n        font-size: 14px;\n        color: #D2DAE6;\n        letter-spacing: 0;\n      }\n      .player-start {\n        position: absolute;\n        right 0\n        bottom 0\n        width 210px\n        height 55px\n        background #5cadff\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n      .player-mic{\n        position: absolute;\n        right 260px\n        bottom 0\n        /*width 210px*/\n        height 55px\n        display: flex;\n        justify-content: center;\n        align-items: center\n        padding 0 10px\n      }\n      .play-text{\n        font-size 16px\n        color #ffffff\n        margin-left 5px\n      }\n      .player-icon{\n        width 14px\n        height 14px\n      }\n      .mic-text{\n        font-size 14px\n        color #8A9099\n        margin-left 5px\n      }\n    }\n    .volume-box {\n      position absolute\n      right 220px\n      bottom 8px\n      .progress-box {\n        padding 4px 0\n        position absolute\n        bottom 35px\n        right 32px\n      }\n    }\n    /deep/ .vcp-player video {\n      position absolute\n      top 0\n      left 0\n      width 100% !important\n      height 100% !important\n      object-fit cover\n    }\n\n    /deep/ .vcp-player {\n      width 100% !important\n      height 100% !important\n      position: relative;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color:rgba(0,0,0,0)\n    }\n\n    /deep/ .vcp-bigplay {\n      display none\n    }\n\n    /deep/ .vcp-error-tips {\n      color #FFFFFF\n      margin-top: -8.25em\n    }\n  }\n</style>\n"]}]}