{"remainingRequest":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/conversation/conversationProfile/user-profile.vue?vue&type=style&index=0&id=809108c8&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/conversation/conversationProfile/user-profile.vue","mtime":1648707124000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.profile-user\n  width 100%\n  text-align center\n  padding 0 20px\n  .avatar\n    width 160px\n    height 160px\n    border-radius 50%\n    margin 30px auto\n  .nick-name\n    width 100%\n    color $base\n    font-size 20px\n    font-weight bold\n    text-shadow $font-dark 0 0 0.1em\n    .anonymous\n      color $first\n      text-shadow none\n  .gender\n    padding 5px 0 10px 0\n    border-bottom 1px solid $border-base\n  .btn-add-blacklist\n    color $danger\n  .el-select\n    margin-left -248px\n  .add-item\n    display flex\n    .avatar\n      display block\n      width 48px\n      height 48px\n      border-radius 50%\n      margin 0\n    .item-nick\n      line-height 48px\n      margin-left  20px\n\n\n\n",{"version":3,"sources":["user-profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-profile.vue","sourceRoot":"src/components/conversation/conversationProfile","sourcesContent":["<template>\n  <div class=\"profile-user\">\n    <avatar :title=userProfile.userID :src=\"userProfile.avatar\" />\n    <div class=\"nick-name text-ellipsis\">\n      <span v-if=\"userProfile.nick\" :title=userProfile.nick>\n        {{ userProfile.nick }}\n      </span>\n      <span v-else class=\"anonymous\" title=\"该用户未设置昵称\">\n        [Anonymous]\n      </span>\n    </div>\n    <div class=\"gender\" v-if=\"genderClass\">\n      <span :title=\"gender\" class=\"iconfont\" :class=\"genderClass\"></span>\n    </div>\n    <el-button\n      title=\"将该用户加入黑名单\"\n      type=\"text\"\n      @click=\"addToBlackList\"\n      v-if=\"!isInBlacklist && userProfile.userID !== myUserID\"\n      class=\"btn-add-blacklist\"\n      >加入黑名单</el-button\n    >\n    <el-button title=\"将该用户移出黑名单\" type=\"text\" @click=\"removeFromBlacklist\" v-else-if=\"isInBlacklist\">移出黑名单</el-button>\n    <el-button title=\"删除好友\" type=\"text\" @click=\"removeFromFriendList\" v-if=\"isFriend\">删除好友</el-button>\n    <el-button\n          title=\"加好友\"\n          type=\"text\"\n          @click=\"dialogAddFriendVisible = true\"\n          v-if=\"!isFriend\"\n          class=\"btn-add-friend\"\n    >添加好友</el-button>\n    <el-dialog title=\"添加好友\" :visible.sync=\"dialogAddFriendVisible\" width=\"600px\">\n      <el-form :model=\"addInfo\">\n        <el-form-item label=\"\" :label-width=\"formLabelWidth\">\n          <div class=\"add-item\">\n            <img\n                    class=\"avatar\"\n                    :src=\"userProfile.avatar ? userProfile.avatar : 'http://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png'\"\n            />\n            <div  class=\"item-nick\">{{userProfile.nick||userProfile.userID}}</div>\n          </div>\n        </el-form-item>\n        <el-form-item label=\"请输入验证信息\" :label-width=\"formLabelWidth\">\n          <el-input\n                  type=\"textarea\"\n                  :rows=\"2\"\n                  placeholder=\"请输入内容\"\n                  v-model=\"addInfo.wording\">\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"分组\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"addInfo.groupName\" placeholder=\"\">\n            <el-option label=\"选择分组\" value=\"\"></el-option>\n            <el-option  v-for=\"name in friendGroupNameList\" :key=\"name\" :label=\"name\" :value=\"name\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"addInfo.remark\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogAddFriendVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addFriend\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { Select, Option, Form ,FormItem, Input} from 'element-ui'\n\n// import FriendItem from './friend-item.vue'\nexport default {\n  props: {\n    userProfile: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {\n    ElSelect: Select,\n    ElOption: Option,\n    ElForm: Form,\n    ElFormItem: FormItem,\n    ElInput: Input,\n  },\n  data() {\n    return {\n      addInfo: {\n        remark: '',\n        groupName: '',\n        wording: '',\n        type: this.TIM.TYPES.SNS_ADD_TYPE_BOTH,\n      },\n      formLabelWidth: '120px',\n      dialogAddFriendVisible: false,\n    }\n  },\n  computed: {\n    ...mapState({\n      blacklist: state => state.blacklist.blacklist,\n      friendList: state => state.friend.friendList,\n      myUserID: state => state.user.currentUserProfile.userID,\n      friendGroupList: state => state.friend.friendGroupList\n    }),\n    isInBlacklist() {\n      return this.blacklist.findIndex(item => item.userID === this.userProfile.userID) >= 0\n    },\n    isFriend() {\n      return this.friendList.findIndex(item => item.userID === this.userProfile.userID) >= 0\n    },\n    friendGroupNameList() {\n      return this.friendGroupList.map((item) => {return item.name})\n    },\n    gender() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return '男'\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return '女'\n        default:\n          return '未设置'\n      }\n    },\n    genderClass() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return 'icon-male'\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return 'icon-female'\n        default:\n          return ''\n      }\n    }\n  },\n  created() {\n  },\n  methods: {\n    addToBlackList() {\n      this.tim\n        .addToBlacklist({ userIDList: [this.userProfile.userID] })\n        .then(() => {\n          this.$store.dispatch('getBlacklist')\n        })\n        .catch(imError => {\n          this.$store.commit('showMessage', {\n            message: imError.message,\n            type: 'error'\n          })\n        })\n    },\n    addFriend() {\n      this.tim.addFriend({\n        to: this.userProfile.userID,\n        remark: this.addInfo.remark,\n        groupName: this.addInfo.groupName,\n        wording: this.addInfo.wording,\n        source: 'AddSource_Type_Web',\n        type: this.addInfo.type\n      }).then((res) => {\n          // console.log(res)\n        if (res.data.code === 30539) {\n          this.$store.commit('showMessage', {\n            message: res.data.message,\n            type: 'warning'\n          })\n        }\n      })\n        .catch(error => {\n          this.$store.commit('showMessage', {\n            message: error.message,\n            type: 'warning'\n          })\n        })\n      this.dialogAddFriendVisible = false\n      this.addInfo = {\n        remark: '',\n        groupName: '',\n        wording: '',\n      }\n    },\n    removeFromFriendList() {\n      let options = {\n        userIDList: [this.userProfile.userID],\n        type: this.TIM.TYPES.SNS_DELETE_TYPE_BOTH\n      }\n      this.tim.deleteFriend(options).then(() => {\n      }).catch(error => {\n        this.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        })\n      })\n    },\n    removeFromBlacklist() {\n      this.tim.removeFromBlacklist({ userIDList: [this.userProfile.userID] }).then(() => {\n        this.$store.commit('removeFromBlacklist', this.userProfile.userID)\n      })\n      .catch(error => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.profile-user\n  width 100%\n  text-align center\n  padding 0 20px\n  .avatar\n    width 160px\n    height 160px\n    border-radius 50%\n    margin 30px auto\n  .nick-name\n    width 100%\n    color $base\n    font-size 20px\n    font-weight bold\n    text-shadow $font-dark 0 0 0.1em\n    .anonymous\n      color $first\n      text-shadow none\n  .gender\n    padding 5px 0 10px 0\n    border-bottom 1px solid $border-base\n  .btn-add-blacklist\n    color $danger\n  .el-select\n    margin-left -248px\n  .add-item\n    display flex\n    .avatar\n      display block\n      width 48px\n      height 48px\n      border-radius 50%\n      margin 0\n    .item-nick\n      line-height 48px\n      margin-left  20px\n\n\n\n</style>\n"]}]}