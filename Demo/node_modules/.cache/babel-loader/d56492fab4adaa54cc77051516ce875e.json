{"remainingRequest":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/babel-loader/lib/index.js!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/friend/friend-container.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/friend/friend-container.vue","mtime":1648707124000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/babel.config.js","mtime":1648707124000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nexport default {\n  name: 'index',\n  data: function data() {\n    return {\n      showEdit: false,\n      showEditRemark: false,\n      showRemark: false,\n      addGroupName: '',\n      profileRemark: '',\n      editGroupList: [],\n      isUpdate: false,\n      acceptApplication: {\n        remark: '',\n        type: 'Response_Action_AgreeAndAdd'\n      }\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapState({\n    friendContent: function friendContent(state) {\n      return state.friend.friendContent;\n    },\n    applicationContent: function applicationContent(state) {\n      return state.friend.applicationContent;\n    },\n    friendGroupList: function friendGroupList(state) {\n      return state.friend.friendGroupList;\n    }\n  })), {}, {\n    showFriendContent: function showFriendContent() {\n      if (JSON.stringify(this.friendContent) === '{}') {\n        return false;\n      }\n\n      return true;\n    },\n    showApplicationContent: function showApplicationContent() {\n      if (JSON.stringify(this.applicationContent) === '{}') {\n        return false;\n      }\n\n      return true;\n    },\n    friendProfile: function friendProfile() {\n      return this.friendContent.friend;\n    },\n    groupName: function groupName() {\n      if (this.friendProfile.groupList.length > 0) {\n        return this.friendProfile.groupList.join(',');\n      } else {\n        return '暂无分组';\n      }\n    },\n    groupList: {\n      get: function get() {\n        return this.friendProfile.groupList;\n      },\n      set: function set(value) {\n        this.editGroupList = value;\n      }\n    },\n    friendType: function friendType() {\n      return this.friendContent.type;\n    },\n    getSource: function getSource() {\n      return function (source) {\n        return source.substring(15);\n      };\n    }\n  }),\n  methods: {\n    showEditHandler: function showEditHandler() {\n      this.showEdit = true;\n      this.addGroupName = '';\n    },\n    inputFocus: function inputFocus(ref) {\n      var _this = this;\n\n      this.profileRemark = this.friendProfile.remark;\n      this.$nextTick(function () {\n        _this.$refs[ref].focus();\n      });\n    },\n    blurHandler: function blurHandler() {\n      this.showEditRemark = false;\n      this.isUpdate = true;\n    },\n    remarkBlurHandler: function remarkBlurHandler() {// this.showEditRemark = false\n    },\n    acceptHandler: function acceptHandler() {\n      var _this2 = this;\n\n      this.showRemark = true;\n      this.acceptApplication.remark = '';\n      this.$nextTick(function () {\n        _this2.$refs.showRemark.focus();\n      });\n    },\n    cancelHandler: function cancelHandler() {\n      this.showRemark = false;\n    },\n    closeHandler: function closeHandler() {\n      this.showEdit = false;\n\n      if (this.isUpdate) {\n        this.editRemarkHandler();\n      }\n    },\n    editRemarkHandler: function editRemarkHandler() {\n      this.showEditRemark = false; // 更新好友备注\n\n      this.tim.updateFriend({\n        userID: this.friendProfile.userID,\n        remark: this.profileRemark\n      }).then(function () {}).catch(function (imError) {\n        console.warn('getFriendProfile error:', imError); // 更新失败\n      });\n      this.isUpdate = false;\n    },\n    updateFriendGroup: function updateFriendGroup() {\n      this.profileRemark = this.friendProfile.remark; // 更新好友分组\n\n      this.tim.updateFriend({\n        userID: this.friendProfile.userID,\n        groupList: this.editGroupList\n      }).then(function () {}).catch(function (imError) {\n        console.warn('getFriendProfile error:', imError); // 更新失败\n      });\n    },\n    checkoutConversation: function checkoutConversation(userID) {\n      var _this3 = this;\n\n      this.$store.dispatch('checkoutConversation', \"C2C\".concat(userID)).then(function () {\n        _this3.showDialog = false;\n\n        _this3.$bus.$emit('checkoutConversation');\n      }).catch(function () {\n        _this3.$store.commit('showMessage', {\n          message: '没有找到该用户',\n          type: 'warning'\n        });\n      });\n    },\n    addToFriendGroup: function addToFriendGroup() {\n      var _this4 = this;\n\n      this.tim.addToFriendGroup({\n        name: this.addGroupName,\n        userIDList: [this.friendProfile.userID]\n      }).then(function () {\n        _this4.$store.commit('showMessage', {\n          message: '添加成功',\n          type: 'success'\n        });\n      }).catch(function (error) {\n        _this4.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n      this.showEdit = false;\n    },\n    removeFromFriendGroup: function removeFromFriendGroup(userID) {\n      var _this5 = this;\n\n      this.tim.removeFromFriendGroup({\n        name: this.friendContent.groupName,\n        userIDList: [userID]\n      }).then(function () {\n        _this5.resetContent(); // 清空页面\n\n      }).catch(function () {});\n    },\n    removeFromFriendList: function removeFromFriendList(userID) {\n      var _this6 = this;\n\n      this.tim.deleteFriend({\n        userIDList: [userID],\n        type: 'Delete_Type_Both'\n      }).then(function () {\n        _this6.resetContent(); // 清空页面\n\n      }).catch(function (error) {\n        _this6.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    // 同意\n    acceptFriendApplication: function acceptFriendApplication(userID) {\n      var _this7 = this;\n\n      this.tim.acceptFriendApplication({\n        userID: userID,\n        remark: this.acceptApplication.remark,\n        tag: this.acceptApplication.tag,\n        type: this.acceptApplication.type\n      }).then(function () {\n        _this7.resetContent();\n\n        _this7.$store.commit('showMessage', {\n          message: '已同意加好友',\n          type: 'success'\n        });\n      }).catch(function (error) {\n        _this7.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n      this.acceptApplication.remark = '';\n      this.showRemark = false;\n    },\n    // application\n    deleteFriendApplication: function deleteFriendApplication(application) {\n      var _this8 = this;\n\n      this.$store.commit('updateUnreadCount', 0);\n      this.tim.deleteFriendApplication({\n        userID: application.userID,\n        type: application.type\n      }).then(function () {\n        _this8.resetContent(); // 清空页面\n\n\n        _this8.$store.commit('showMessage', {\n          message: '已删除',\n          type: 'success'\n        });\n      }).catch(function (error) {\n        _this8.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    // 拒绝\n    refuseFriendApplication: function refuseFriendApplication(userID) {\n      var _this9 = this;\n\n      this.$store.commit('updateUnreadCount', 0);\n      this.tim.refuseFriendApplication({\n        userID: userID\n      }).then(function () {\n        _this9.resetContent(); // 清空页面\n\n\n        _this9.$store.commit('showMessage', {\n          message: '已拒绝',\n          type: 'success'\n        }).catch(function (error) {\n          _this9.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          });\n        });\n      });\n    },\n    resetContent: function resetContent() {\n      this.$store.commit('resetCurrentConversation');\n      this.$store.commit('resetFriendContent');\n      this.$store.commit('resetApplicationContent');\n    }\n  }\n};",{"version":3,"mappings":"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","names":["name","data","showEdit","showEditRemark","showRemark","addGroupName","profileRemark","editGroupList","isUpdate","acceptApplication","remark","type","computed","mapState","friendContent","applicationContent","friendGroupList","showFriendContent","showApplicationContent","friendProfile","groupName","groupList","get","set","value","friendType","getSource","methods","showEditHandler","inputFocus","ref","blurHandler","remarkBlurHandler","acceptHandler","cancelHandler","closeHandler","editRemarkHandler","userID","then","catch","console","updateFriendGroup","checkoutConversation","dispatch","message","addToFriendGroup","userIDList","removeFromFriendGroup","removeFromFriendList","acceptFriendApplication","tag","deleteFriendApplication","application","refuseFriendApplication","resetContent"],"sourceRoot":"src/components/friend","sources":["friend-container.vue"],"sourcesContent":["<template>\n    <div class=\"friend-content\" v-if=\"showFriendContent || showApplicationContent\" @click=\"closeHandler\">\n        <div class=\"friend-box\" v-if=\"showFriendContent\">\n            <div class=\"profile-container\" >\n                <div class=\"item-nick text-ellipsis\">{{friendProfile.profile.nick||friendProfile.profile.userID}}</div>\n                <img\n                        class=\"avatar\"\n                        :src=\"friendProfile.profile.avatar ? friendProfile.profile.avatar : 'https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png'\"\n                />\n            </div>\n            <el-divider></el-divider>\n            <p class=\"content-box\"><span class=\"content-title\">userID</span><span class=\"content-text\">{{friendProfile.userID}}</span></p>\n            <div class=\"content-box\"><span class=\"content-title\">备注名</span>\n                <div class=\"text-box\"   v-if=\"!showEditRemark\">\n                    <span class=\"content-text  content-width text-ellipsis\">{{friendProfile.remark || '暂无'}}</span>\n                    <i\n                            class=\"el-icon-edit\"\n                            @click.stop=\"\n                        showEditRemark = true\n                        inputFocus('showEditRemark')\n\n            \"\n                            style=\"cursor:pointer; font-size:16px; margin-left: 6px\"\n                    />\n                </div>\n                <el-input\n                        style=\"display: inline-block\"\n                        ref=\"showEditRemark\"\n                        v-else\n                        autofocus\n                        v-model=\"profileRemark\"\n                        size=\"mini\"\n                        @blur=\"blurHandler\"\n                        @keydown.enter.native=\"editRemarkHandler\"\n                />\n            </div>\n\n            <p class=\"content-box\"><span class=\"content-title\">来源</span><span class=\"content-text\">{{getSource(friendProfile.source)}}</span></p>\n            <el-divider></el-divider>\n            <div class=\"content-box\" v-show=\"friendType==='friendList'\">\n                <span class=\"content-title\" v-show=\"!showEdit\" style=\"line-height: 35px\">所在分组</span>\n                <span class=\"content-title\" v-show=\"showEdit\"  style=\"line-height: 35px\">添加到分组</span>\n                <div class=\"text-content\">\n                    <span class=\"content-text\" v-show=\"!showEdit\">{{groupName}}</span>\n                    <i class=\"el-icon-edit edit-icon\" v-show=\"!showEdit\"   @click.stop=\"showEditHandler\"></i>\n                </div>\n                <el-select v-if=\"showEdit\" v-model=\"addGroupName\"  placeholder=\"选择分组\" @change=\"addToFriendGroup\">\n                    <el-option\n                            v-for=\"item in friendGroupList\"\n                            @blur=\"showEdit = false\"\n                            :key=\"item.name\"\n                            :label=\"item.name\"\n                            :value=\"item.name\">\n                    </el-option>\n                </el-select>\n            </div>\n            <p class=\"content-box\" v-show=\"friendType==='groupFriend'\" style=\"height: 40px\">\n                <span class=\"content-title\" style=\"line-height: 35px\">所在分组</span>\n                <span class=\"content-text\" v-show=\"!showEdit\" style=\"line-height: 35px\">{{groupName}}</span>\n            </p>\n            <div class=\"sendBtn\" @click.stop=\"checkoutConversation(friendProfile.userID)\">发送消息</div>\n            <div class=\"delete-text\" v-show=\"friendType==='groupFriend'\" @click.stop=\"removeFromFriendGroup(friendProfile.userID)\">从该群组中移除</div>\n            <div class=\"delete-text\" v-show=\"friendType==='friendList'\" @click.stop=\"removeFromFriendList(friendProfile.userID)\">删除该好友</div>\n        </div>\n        <div class=\"friend-box\" v-if=\"showApplicationContent\">\n            <div class=\"profile-container\" >\n                <div class=\"item-nick text-ellipsis\">{{applicationContent.nick||applicationContent.userID}}</div>\n                <img\n                        class=\"avatar\"\n                        :src=\"applicationContent.avatar ? applicationContent.avatar : 'http://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png'\"\n                />\n            </div>\n            <el-divider></el-divider>\n            <p class=\"content-box\"><span class=\"content-title\">userID</span><span class=\"content-text\">{{applicationContent.userID}}</span></p>\n            <p class=\"content-box\"><span class=\"content-title\">来源</span><span class=\"content-text content-width text-ellipsis\">{{getSource(applicationContent.source)}}</span></p>\n            <div class=\"content-box\" v-if=\"showRemark\"><span class=\"content-title\">备注名</span>\n                <el-input\n                        style=\"display: inline-block\"\n                        ref=\"showRemark\"\n                        autofocus\n                        v-model=\"acceptApplication.remark\"\n                        size=\"mini\"\n                        @blur=\"remarkBlurHandler\"\n                        @keydown.enter.native=\"editRemarkHandler\"\n                />\n            </div>\n            <el-divider></el-divider>\n            <p class=\"content-box\">\n                <span class=\"content-title\">打招呼</span>\n                <el-tooltip class=\"item\" effect=\"dark\" :content=\"applicationContent.wording\" placement=\"bottom-end\">\n                    <span class=\"content-text content-width text-ellipsis\">{{applicationContent.wording}}</span>\n                </el-tooltip>\n            </p>\n            <div class=\"application-box\" v-if=\"!showRemark\">\n                <p class=\"application-refuse\" @click=\"acceptHandler\">同意</p>\n                <p class=\"application-delete\"  @click=\"refuseFriendApplication(applicationContent.userID)\">拒绝</p>\n            </div>\n            <div class=\"application-box\" v-else>\n                <p class=\"application-refuse\" @click=\"acceptFriendApplication(applicationContent.userID)\">确认</p>\n                <p class=\"application-delete\"  @click=\"cancelHandler()\">取消</p>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n  import { mapState } from 'vuex'\n  export default {\n    name: 'index',\n    data() {\n      return {\n        showEdit: false,\n        showEditRemark: false,\n        showRemark: false,\n        addGroupName: '',\n        profileRemark: '',\n        editGroupList: [],\n        isUpdate: false,\n        acceptApplication: {\n          remark: '',\n          type: 'Response_Action_AgreeAndAdd',\n        },\n      }\n    },\n    computed: {\n      ...mapState({\n        friendContent: state => state.friend.friendContent,\n        applicationContent: state => state.friend.applicationContent,\n        friendGroupList: state => state.friend.friendGroupList,\n      }),\n      showFriendContent() {\n        if (JSON.stringify(this.friendContent) === '{}') {\n          return false\n        }\n        return true\n      },\n      showApplicationContent() {\n        if (JSON.stringify(this.applicationContent) === '{}') {\n          return false\n        }\n        return true\n      },\n      friendProfile() {\n        return this.friendContent.friend\n      },\n      groupName() {\n        if(this.friendProfile.groupList.length>0) {\n          return this.friendProfile.groupList.join(',')\n        }else {\n          return '暂无分组'\n        }\n      },\n      groupList:{\n        get() {\n          return this.friendProfile.groupList\n        },\n        set(value) {\n          this.editGroupList = value\n        }\n      },\n      friendType() {\n        return this.friendContent.type\n      },\n      getSource() {\n        return function (source) {\n          return source.substring(15)\n        }\n      },\n    },\n    methods: {\n      showEditHandler() {\n        this.showEdit = true\n        this.addGroupName = ''\n      },\n      inputFocus(ref) {\n        this.profileRemark = this.friendProfile.remark\n        this.$nextTick(() => {\n          this.$refs[ref].focus()\n        })\n      },\n      blurHandler() {\n        this.showEditRemark = false\n        this.isUpdate = true\n      },\n      remarkBlurHandler() {\n        // this.showEditRemark = false\n      },\n      acceptHandler() {\n        this.showRemark = true\n        this.acceptApplication.remark = ''\n        this.$nextTick(() => {\n          this.$refs.showRemark.focus()\n        })\n      },\n      cancelHandler() {\n        this.showRemark = false\n      },\n      closeHandler() {\n        this.showEdit = false\n        if (this.isUpdate) {\n          this.editRemarkHandler()\n        }\n      },\n      editRemarkHandler() {\n        this.showEditRemark = false\n        // 更新好友备注\n        this.tim.updateFriend({\n          userID: this.friendProfile.userID,\n          remark: this.profileRemark\n        }).then(()=> {\n        }).catch((imError)=> {\n          console.warn('getFriendProfile error:', imError) // 更新失败\n        })\n        this.isUpdate = false\n      },\n      updateFriendGroup() {\n        this.profileRemark = this.friendProfile.remark\n        // 更新好友分组\n        this.tim.updateFriend({\n          userID: this.friendProfile.userID,\n          groupList: this.editGroupList\n        }).then(()=>{\n        }).catch((imError)=> {\n          console.warn('getFriendProfile error:', imError) // 更新失败\n        })\n      },\n      checkoutConversation(userID) {\n        this.$store\n          .dispatch('checkoutConversation', `C2C${userID}`)\n          .then(() => {\n            this.showDialog = false\n            this.$bus.$emit('checkoutConversation')\n          }).catch(() => {\n          this.$store.commit('showMessage', {\n            message: '没有找到该用户',\n            type: 'warning'\n          })\n        })\n      },\n      addToFriendGroup() {\n        this.tim.addToFriendGroup({name: this.addGroupName, userIDList: [this.friendProfile.userID]}).then(() => {\n          this.$store.commit('showMessage', {\n            message: '添加成功',\n            type: 'success'\n          })\n        }).catch((error) => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n        })\n        this.showEdit = false\n      },\n      removeFromFriendGroup(userID) {\n        this.tim.removeFromFriendGroup({\n          name: this.friendContent.groupName,\n          userIDList: [userID],\n        }).then(() => {\n          this.resetContent() // 清空页面\n        }).catch(() => {\n        })\n      },\n      removeFromFriendList(userID) {\n        this.tim.deleteFriend({\n          userIDList: [userID],\n          type: 'Delete_Type_Both'\n        }).then(() => {\n          this.resetContent() // 清空页面\n        }).catch(error => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n        })\n      },\n      // 同意\n      acceptFriendApplication(userID) {\n        this.tim.acceptFriendApplication({\n          userID: userID,\n          remark: this.acceptApplication.remark,\n          tag: this.acceptApplication.tag,\n          type: this.acceptApplication.type\n        }).then(() => {\n          this.resetContent()\n          this.$store.commit('showMessage', {\n            message: '已同意加好友',\n            type: 'success'\n          })\n\n        }).catch((error) => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n        })\n        this.acceptApplication.remark = ''\n        this.showRemark = false\n      },\n      // application\n      deleteFriendApplication(application) {\n        this.$store.commit('updateUnreadCount', 0)\n        this.tim.deleteFriendApplication({userID: application.userID ,type: application.type}).then(() => {\n          this.resetContent() // 清空页面\n          this.$store.commit('showMessage', {\n            message: '已删除',\n            type: 'success'\n          })\n        }).catch((error) => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n        })\n      },\n      // 拒绝\n      refuseFriendApplication(userID) {\n        this.$store.commit('updateUnreadCount', 0)\n        this.tim.refuseFriendApplication({\n          userID: userID\n        }).then(() => {\n          this.resetContent() // 清空页面\n          this.$store.commit('showMessage', {\n            message: '已拒绝',\n            type: 'success'\n          }).catch((error) => {\n            this.$store.commit('showMessage', {\n              type: 'error',\n              message: error.message\n            })\n          })\n        })\n      },\n      resetContent() {\n        this.$store.commit('resetCurrentConversation')\n        this.$store.commit('resetFriendContent')\n        this.$store.commit('resetApplicationContent')\n      }\n    }\n  }\n</script>\n\n<style lang=\"stylus\" scpoed>\n    .friend-content {\n        /*width 60%*/\n        width 100%\n        .friend-box {\n            margin 100px auto 0\n            width 360px\n            .profile-container {\n                display flex\n                justify-content space-between\n                .item-nick {\n                    width 200px\n                    line-height 48px\n                }\n                .avatar {\n                    display block\n                    width 48px\n                    height 48px\n                    border-radius 50%\n                    margin-right 25px\n                }\n            }\n            .el-input {\n                width 50%\n            }\n            .el-select .el-input {\n                width 100%\n            }\n            .content-box {\n                display flex\n                /*justify-content space-between*/\n                margin 18px 0\n                .text-content {\n                    height 40px\n                }\n                .text-box {\n                    display flex\n                    justify-content center\n                    align-items center\n                }\n                .content-title {\n                    display inline-block\n                    min-width 80px\n                    font-size 16px\n                    color #717175\n                    margin-right 140px\n                }\n                .content-text {\n                    font-size 18px\n                    color #000000\n                    word-break break-word\n                }\n                .content-width {\n                    display inline-block\n                    max-width 115px\n                    height 28px\n                }\n                .edit-icon {\n                    cursor: pointer\n                    font-size 16px\n                    margin-left 6px\n                    margin-top 8px\n                }\n\n            }\n\n            .sendBtn {\n                cursor pointer\n                width 120px\n                height 40px\n                border-radius 5px\n                background-color #00A4FF\n                color #ffffff\n                font-size 16px\n                margin 80px auto 0\n                text-align center\n                line-height 40px\n            }\n\n            .delete-text {\n                position absolute\n                cursor pointer\n                left 0\n                right 0\n                margin auto\n                bottom 25px\n                width 120px\n                height 40px\n                font-size 17px\n                color #586B95\n                text-align center\n            }\n            .application-box {\n                display flex\n                justify-content space-between\n            }\n            .application-delete {\n                cursor pointer\n                width 120px\n                height 40px\n                border-radius 5px\n                border 1px solid #00A4FF\n                color #1c2438\n                font-size 16px\n                margin-top 80px\n                text-align center\n                line-height 40px\n            }\n            .application-refuse {\n                cursor pointer\n                width 120px\n                height 40px\n                border-radius 5px\n                background-color #00A4FF\n                border 1px solid #00A4FF\n                color #ffffff\n                font-size 16px\n                margin-top 80px\n                text-align center\n                line-height 40px\n            }\n        }\n    }\n\n\n</style>\n"]}]}