{"remainingRequest":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/babel-loader/lib/index.js!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/conversation/conversationProfile/user-profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/src/components/conversation/conversationProfile/user-profile.vue","mtime":1648707124000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/babel.config.js","mtime":1648707124000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find-index\";\nimport _defineProperty from \"/Users/wei/IdeaProjects/boywei/imsdk-web/Demo/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\nimport _Input2 from \"element-ui/lib/theme-chalk/input.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Input from \"element-ui/lib/input\";\nimport _FormItem2 from \"element-ui/lib/theme-chalk/form-item.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _FormItem from \"element-ui/lib/form-item\";\nimport _Form2 from \"element-ui/lib/theme-chalk/form.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Form from \"element-ui/lib/form\";\nimport _Option2 from \"element-ui/lib/theme-chalk/option.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Option from \"element-ui/lib/option\";\nimport _Select2 from \"element-ui/lib/theme-chalk/select.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Select from \"element-ui/lib/select\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\n// import FriendItem from './friend-item.vue'\nexport default {\n  props: {\n    userProfile: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {\n    ElSelect: _Select,\n    ElOption: _Option,\n    ElForm: _Form,\n    ElFormItem: _FormItem,\n    ElInput: _Input\n  },\n  data: function data() {\n    return {\n      addInfo: {\n        remark: '',\n        groupName: '',\n        wording: '',\n        type: this.TIM.TYPES.SNS_ADD_TYPE_BOTH\n      },\n      formLabelWidth: '120px',\n      dialogAddFriendVisible: false\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapState({\n    blacklist: function blacklist(state) {\n      return state.blacklist.blacklist;\n    },\n    friendList: function friendList(state) {\n      return state.friend.friendList;\n    },\n    myUserID: function myUserID(state) {\n      return state.user.currentUserProfile.userID;\n    },\n    friendGroupList: function friendGroupList(state) {\n      return state.friend.friendGroupList;\n    }\n  })), {}, {\n    isInBlacklist: function isInBlacklist() {\n      var _this = this;\n\n      return this.blacklist.findIndex(function (item) {\n        return item.userID === _this.userProfile.userID;\n      }) >= 0;\n    },\n    isFriend: function isFriend() {\n      var _this2 = this;\n\n      return this.friendList.findIndex(function (item) {\n        return item.userID === _this2.userProfile.userID;\n      }) >= 0;\n    },\n    friendGroupNameList: function friendGroupNameList() {\n      return this.friendGroupList.map(function (item) {\n        return item.name;\n      });\n    },\n    gender: function gender() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return '男';\n\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return '女';\n\n        default:\n          return '未设置';\n      }\n    },\n    genderClass: function genderClass() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return 'icon-male';\n\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return 'icon-female';\n\n        default:\n          return '';\n      }\n    }\n  }),\n  created: function created() {},\n  methods: {\n    addToBlackList: function addToBlackList() {\n      var _this3 = this;\n\n      this.tim.addToBlacklist({\n        userIDList: [this.userProfile.userID]\n      }).then(function () {\n        _this3.$store.dispatch('getBlacklist');\n      }).catch(function (imError) {\n        _this3.$store.commit('showMessage', {\n          message: imError.message,\n          type: 'error'\n        });\n      });\n    },\n    addFriend: function addFriend() {\n      var _this4 = this;\n\n      this.tim.addFriend({\n        to: this.userProfile.userID,\n        remark: this.addInfo.remark,\n        groupName: this.addInfo.groupName,\n        wording: this.addInfo.wording,\n        source: 'AddSource_Type_Web',\n        type: this.addInfo.type\n      }).then(function (res) {\n        // console.log(res)\n        if (res.data.code === 30539) {\n          _this4.$store.commit('showMessage', {\n            message: res.data.message,\n            type: 'warning'\n          });\n        }\n      }).catch(function (error) {\n        _this4.$store.commit('showMessage', {\n          message: error.message,\n          type: 'warning'\n        });\n      });\n      this.dialogAddFriendVisible = false;\n      this.addInfo = {\n        remark: '',\n        groupName: '',\n        wording: ''\n      };\n    },\n    removeFromFriendList: function removeFromFriendList() {\n      var _this5 = this;\n\n      var options = {\n        userIDList: [this.userProfile.userID],\n        type: this.TIM.TYPES.SNS_DELETE_TYPE_BOTH\n      };\n      this.tim.deleteFriend(options).then(function () {}).catch(function (error) {\n        _this5.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    removeFromBlacklist: function removeFromBlacklist() {\n      var _this6 = this;\n\n      this.tim.removeFromBlacklist({\n        userIDList: [this.userProfile.userID]\n      }).then(function () {\n        _this6.$store.commit('removeFromBlacklist', _this6.userProfile.userID);\n      }).catch(function (error) {\n        _this6.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AAGA;AACA;AACAA;AACAC;AACAC,kBADA;AAEAC;AAFA;AADA,GADA;AAOAC;AACAC,qBADA;AAEAC,qBAFA;AAGAC,iBAHA;AAIAC,yBAJA;AAKAC;AALA,GAPA;AAcAC,MAdA,kBAcA;AACA;AACAC;AACAC,kBADA;AAEAC,qBAFA;AAGAC,mBAHA;AAIAZ;AAJA,OADA;AAOAa,6BAPA;AAQAC;AARA;AAUA,GAzBA;AA0BAC,4CACAC;AACAC;AAAA;AAAA,KADA;AAEAC;AAAA;AAAA,KAFA;AAGAC;AAAA;AAAA,KAHA;AAIAC;AAAA;AAAA;AAJA,IADA;AAOAC,iBAPA,2BAOA;AAAA;;AACA;AAAA;AAAA;AACA,KATA;AAUAC,YAVA,sBAUA;AAAA;;AACA;AAAA;AAAA;AACA,KAZA;AAaAC,uBAbA,iCAaA;AACA;AAAA;AAAA;AACA,KAfA;AAgBAC,UAhBA,oBAgBA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AANA;AAQA,KAzBA;AA0BAC,eA1BA,yBA0BA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AANA;AAQA;AAnCA,IA1BA;AA+DAC,SA/DA,qBA+DA,CACA,CAhEA;AAiEAC;AACAC,kBADA,4BACA;AAAA;;AACA,eACAC,cADA,CACA;AAAAC;AAAA,OADA,EAEAC,IAFA,CAEA;AACA;AACA,OAJA,EAKAC,KALA,CAKA;AACA;AACAC,kCADA;AAEAjC;AAFA;AAIA,OAVA;AAWA,KAbA;AAcAkC,aAdA,uBAcA;AAAA;;AACA;AACAC,mCADA;AAEAzB,mCAFA;AAGAC,yCAHA;AAIAC,qCAJA;AAKAwB,oCALA;AAMApC;AANA,SAOA+B,IAPA,CAOA;AACA;AACA;AACA;AACAE,qCADA;AAEAjC;AAFA;AAIA;AACA,OAfA,EAgBAgC,KAhBA,CAgBA;AACA;AACAC,gCADA;AAEAjC;AAFA;AAIA,OArBA;AAsBA;AACA;AACAU,kBADA;AAEAC,qBAFA;AAGAC;AAHA;AAKA,KA3CA;AA4CAyB,wBA5CA,kCA4CA;AAAA;;AACA;AACAP,6CADA;AAEA9B;AAFA;AAIA,uDACA,CADA,EACAgC,KADA,CACA;AACA;AACAhC,uBADA;AAEAiC;AAFA;AAIA,OANA;AAOA,KAxDA;AAyDAK,uBAzDA,iCAyDA;AAAA;;AACA;AAAAR;AAAA;AACA;AACA,OAFA,EAGAE,KAHA,CAGA;AACA;AACAhC,uBADA;AAEAiC;AAFA;AAIA,OARA;AASA;AAnEA;AAjEA","names":["props","userProfile","type","required","components","ElSelect","ElOption","ElForm","ElFormItem","ElInput","data","addInfo","remark","groupName","wording","formLabelWidth","dialogAddFriendVisible","computed","mapState","blacklist","friendList","myUserID","friendGroupList","isInBlacklist","isFriend","friendGroupNameList","gender","genderClass","created","methods","addToBlackList","addToBlacklist","userIDList","then","catch","message","addFriend","to","source","removeFromFriendList","removeFromBlacklist"],"sourceRoot":"src/components/conversation/conversationProfile","sources":["user-profile.vue"],"sourcesContent":["<template>\n  <div class=\"profile-user\">\n    <avatar :title=userProfile.userID :src=\"userProfile.avatar\" />\n    <div class=\"nick-name text-ellipsis\">\n      <span v-if=\"userProfile.nick\" :title=userProfile.nick>\n        {{ userProfile.nick }}\n      </span>\n      <span v-else class=\"anonymous\" title=\"该用户未设置昵称\">\n        [Anonymous]\n      </span>\n    </div>\n    <div class=\"gender\" v-if=\"genderClass\">\n      <span :title=\"gender\" class=\"iconfont\" :class=\"genderClass\"></span>\n    </div>\n    <el-button\n      title=\"将该用户加入黑名单\"\n      type=\"text\"\n      @click=\"addToBlackList\"\n      v-if=\"!isInBlacklist && userProfile.userID !== myUserID\"\n      class=\"btn-add-blacklist\"\n      >加入黑名单</el-button\n    >\n    <el-button title=\"将该用户移出黑名单\" type=\"text\" @click=\"removeFromBlacklist\" v-else-if=\"isInBlacklist\">移出黑名单</el-button>\n    <el-button title=\"删除好友\" type=\"text\" @click=\"removeFromFriendList\" v-if=\"isFriend\">删除好友</el-button>\n    <el-button\n          title=\"加好友\"\n          type=\"text\"\n          @click=\"dialogAddFriendVisible = true\"\n          v-if=\"!isFriend\"\n          class=\"btn-add-friend\"\n    >添加好友</el-button>\n    <el-dialog title=\"添加好友\" :visible.sync=\"dialogAddFriendVisible\" width=\"600px\">\n      <el-form :model=\"addInfo\">\n        <el-form-item label=\"\" :label-width=\"formLabelWidth\">\n          <div class=\"add-item\">\n            <img\n                    class=\"avatar\"\n                    :src=\"userProfile.avatar ? userProfile.avatar : 'http://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png'\"\n            />\n            <div  class=\"item-nick\">{{userProfile.nick||userProfile.userID}}</div>\n          </div>\n        </el-form-item>\n        <el-form-item label=\"请输入验证信息\" :label-width=\"formLabelWidth\">\n          <el-input\n                  type=\"textarea\"\n                  :rows=\"2\"\n                  placeholder=\"请输入内容\"\n                  v-model=\"addInfo.wording\">\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"分组\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"addInfo.groupName\" placeholder=\"\">\n            <el-option label=\"选择分组\" value=\"\"></el-option>\n            <el-option  v-for=\"name in friendGroupNameList\" :key=\"name\" :label=\"name\" :value=\"name\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"addInfo.remark\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogAddFriendVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addFriend\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { Select, Option, Form ,FormItem, Input} from 'element-ui'\n\n// import FriendItem from './friend-item.vue'\nexport default {\n  props: {\n    userProfile: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {\n    ElSelect: Select,\n    ElOption: Option,\n    ElForm: Form,\n    ElFormItem: FormItem,\n    ElInput: Input,\n  },\n  data() {\n    return {\n      addInfo: {\n        remark: '',\n        groupName: '',\n        wording: '',\n        type: this.TIM.TYPES.SNS_ADD_TYPE_BOTH,\n      },\n      formLabelWidth: '120px',\n      dialogAddFriendVisible: false,\n    }\n  },\n  computed: {\n    ...mapState({\n      blacklist: state => state.blacklist.blacklist,\n      friendList: state => state.friend.friendList,\n      myUserID: state => state.user.currentUserProfile.userID,\n      friendGroupList: state => state.friend.friendGroupList\n    }),\n    isInBlacklist() {\n      return this.blacklist.findIndex(item => item.userID === this.userProfile.userID) >= 0\n    },\n    isFriend() {\n      return this.friendList.findIndex(item => item.userID === this.userProfile.userID) >= 0\n    },\n    friendGroupNameList() {\n      return this.friendGroupList.map((item) => {return item.name})\n    },\n    gender() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return '男'\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return '女'\n        default:\n          return '未设置'\n      }\n    },\n    genderClass() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return 'icon-male'\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return 'icon-female'\n        default:\n          return ''\n      }\n    }\n  },\n  created() {\n  },\n  methods: {\n    addToBlackList() {\n      this.tim\n        .addToBlacklist({ userIDList: [this.userProfile.userID] })\n        .then(() => {\n          this.$store.dispatch('getBlacklist')\n        })\n        .catch(imError => {\n          this.$store.commit('showMessage', {\n            message: imError.message,\n            type: 'error'\n          })\n        })\n    },\n    addFriend() {\n      this.tim.addFriend({\n        to: this.userProfile.userID,\n        remark: this.addInfo.remark,\n        groupName: this.addInfo.groupName,\n        wording: this.addInfo.wording,\n        source: 'AddSource_Type_Web',\n        type: this.addInfo.type\n      }).then((res) => {\n          // console.log(res)\n        if (res.data.code === 30539) {\n          this.$store.commit('showMessage', {\n            message: res.data.message,\n            type: 'warning'\n          })\n        }\n      })\n        .catch(error => {\n          this.$store.commit('showMessage', {\n            message: error.message,\n            type: 'warning'\n          })\n        })\n      this.dialogAddFriendVisible = false\n      this.addInfo = {\n        remark: '',\n        groupName: '',\n        wording: '',\n      }\n    },\n    removeFromFriendList() {\n      let options = {\n        userIDList: [this.userProfile.userID],\n        type: this.TIM.TYPES.SNS_DELETE_TYPE_BOTH\n      }\n      this.tim.deleteFriend(options).then(() => {\n      }).catch(error => {\n        this.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        })\n      })\n    },\n    removeFromBlacklist() {\n      this.tim.removeFromBlacklist({ userIDList: [this.userProfile.userID] }).then(() => {\n        this.$store.commit('removeFromBlacklist', this.userProfile.userID)\n      })\n      .catch(error => {\n          this.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          })\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.profile-user\n  width 100%\n  text-align center\n  padding 0 20px\n  .avatar\n    width 160px\n    height 160px\n    border-radius 50%\n    margin 30px auto\n  .nick-name\n    width 100%\n    color $base\n    font-size 20px\n    font-weight bold\n    text-shadow $font-dark 0 0 0.1em\n    .anonymous\n      color $first\n      text-shadow none\n  .gender\n    padding 5px 0 10px 0\n    border-bottom 1px solid $border-base\n  .btn-add-blacklist\n    color $danger\n  .el-select\n    margin-left -248px\n  .add-item\n    display flex\n    .avatar\n      display block\n      width 48px\n      height 48px\n      border-radius 50%\n      margin 0\n    .item-nick\n      line-height 48px\n      margin-left  20px\n\n\n\n</style>\n"]}]}